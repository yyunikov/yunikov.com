<polymer-element name="app-layout" attributes="mainTitle subTitle social menuItem">
  <template>
    <style type="text/css" no-shim>
      h1 {
        font-size: 45px;
        font-weight: 300;
        line-height: 64px;
        letter-spacing: -0.01em;
        margin: 0;
        display: table;
      }

      h3 {
        font-size: 25px;
        font-weight: 300;
      }

      /** Elements **/
      core-toolbar {
        background: #FFFFFF;
        color: white;
      }

      paper-item {
        padding: 0;
      }
      
      paper-item .button-content{
        padding: 0;
      }

      paper-item /deep/ .button-content{
        padding: 0;
      }

      paper-item.core-selected {
        background-color: #E7E7E7;
        font-weight: 300;
      }

      paper-item .page-link {
        text-decoration: none;
        color: #444;
        padding: 25px;
      }

      core-header-panel {
        height: 100%;
        overflow: auto;
        -webkit-overflow-scrolling: touch; 
      }

      /** Classes **/
      h3#menu-header {
        color: black;
        margin: 24px;
      }

      .header-text .maintitle {
        padding-left: 70px;
      }

      .header-text .subtitle {
        padding: 12px 0px 0px 58px;
      }

      .home-container, 
      .home-container:link,
      .home-container:visited
      {
        color: #7C7C7C;
        display: block;
        padding-bottom: 10px;
      }

      .home {
        display: inline-block;
        margin: 10px 0 0 30px;
        cursor: pointer;
      }

      .home > img {
        width: 68px;
      }

      .home > span {
        float: right;
        margin: 15px;
        font-weight: 600;
        font-size: 18px;
      }

      core-icon {
        margin-right: 15px;
      }

      .container {
        width: 60%;
        margin: 20px 50px 50px 50px;
      }

      .social-images {
        margin-left: auto; 
        margin-right: 0;
      }

      .social-images a {
        text-decoration: none;
      }

      .social-images img {
        width: 48px; 
        height: 48px;
        padding: 0 4px;
      }

      @media screen and (max-width: 1280px) {
        .container {
          width: 90%;
          margin: 20px auto;
        }
      }

      @media screen and (max-width: 969px) {
        .social-images img {
          width: 32px; 
          height: 32px;
          padding: 0 2px;
          vertical-align: bottom;
        }

        .social-images {
          margin-top: auto;
        }

         core-item.core-selected {
          font-weight: inherit;
        }
      }

      @media screen and (max-width: 620px) {
        core-scaffold::shadow core-toolbar {
          height: 60px;
        }
      }

      @media screen and (max-width: 380px) {
        .social-images img {
          display: none;
        }
      }
    </style>

    <core-scaffold id="scaffold" mode="waterfall-tall" on-scroll="{{scrollHandler}}" responsiveWidth="969px">

      <core-header-panel navigation flex mode="seamed">

        <a class="home-container" href="/" on-click="{{clearMenuItem}}">
          <div class="home">
            <img src="{{homeIconSrc}}" alt="Yuriy Yunikov"></img>
            <span>Yuriy<br/>Yunikov</span>
          </div>
        </a>

        <core-selector id="mainMenu" selectedAttribute="" selected="{{menuItem}}">
          <template repeat="{{section,i in sections}}">
            <paper-item id="menuItem{{i}}" noink>
              <a class="page-link" href="{{section.page}}">
                <core-icon icon="{{section.icon}}"></core-icon>
                <span>{{section.title}}</span>
              </a>
            </paper-item>
          </template>
        </core-selector>

      </core-header-panel>

      <div tool vertical layout flex class="middle header-text">
        <h1 fit id="mainTitle" class="maintitle">{{mainTitle}}</h1>
      </div>

      <div tool horizontal layout flex class="bottom header-text">
        <div id="subTitle" class="subtitle" hidden?="{{!showSubTitle}}">{{subTitle}}</div>

        <div id="social" class="social-images">
          <template repeat="{{i in social}}">
            <a href="{{i.link}}" target="_blank">
              <img src="{{i.img}}" alt="{{i.alt}}">
            </a>
          </template>
        </div>
      </div>
      
      <div class="container" layout vertical>
        <content>
        </content> 
      </div>

    </core-scaffold>


  </template>

  <script>
    Polymer('app-layout', {
      mainTitle: 'Title',
      subTitle: 'Sub Title',
      homeIconSrc: '/images/yunikov-icon.png',
      menuItem: '',
      sections: [
        {title: 'Resume', icon: 'icons:assignment', page: '/resume/'},
        {title: 'Portfolio', icon: 'icons:work', page: '/portfolio/'},
        {title: 'Applications', icon: 'hardware:smartphone', page: '/applications/'},
        {title: 'Blog', icon: 'editor:mode-edit', page: '/blog/categories'},
      ],
      social: [
        {link :'https://plus.google.com/u/0/+YuriyYunikov/',img : '/images/googleplus.png',alt : 'Google+'},
        {link :'http://ua.linkedin.com/in/yyunikov/',img : '/images/linkedin.png',alt : 'LinkedIn'},
        {link :'https://twitter.com/yyunikov',img : '/images/twitter.png',alt : 'Twitter'},
        {link :'http://careers.stackoverflow.com/yyunikov',img : '/images/stackoverflow.png',alt : 'StackOverflow Careers'}
      ],
      ready: function() {
        if (screen.width <= 620) {
          this.subTitle = this.mainTitle;
          this.mainTitle = "";
          this.showSubTitle = true;
        }
      },
      keys: function(input) {
        return Object.keys(input);
      },
      scrollHandler: function(event) {
        if (screen.width > 620) {
          var scroller = event.detail.target;
          var toolbar = $(this.$.scaffold.$.drawerPanel).find('core-toolbar');
          var isTallToolbar = toolbar ? toolbar.hasClass('tall') : scroller.scrollTop == 0;

          if (isTallToolbar) {
            $(this.$.mainTitle)[0].style.fontSize='45px';
            this.showSubTitle = true;
          } else {
            $(this.$.mainTitle)[0].style.fontSize='25px';
            this.showSubTitle = false;
          }
        }
      },
      clearMenuItem: function(event) {
        this.menuItem = -1;
      }
    });
  </script>
</polymer-element>
