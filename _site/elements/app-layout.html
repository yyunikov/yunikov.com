<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="../bower_components/core-menu/core-menu.html">
<link rel="import" href="../bower_components/core-item/core-item.html">
<link rel="import" href="../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../bower_components/core-scaffold/core-scaffold.html">

<polymer-element name="app-layout" attributes="mainTitle subTitle sections">
  <template>
    <link rel="stylesheet" href="../css/app-layout.css">

    <core-scaffold mode="waterfall-tall" on-scroll="{{scrollHandler}}">

      <core-header-panel navigation flex mode="seamed">

        <h3 id="menu-header">Sections</h3>

        <core-menu>
          <template repeat="{{i in keys(sections)}}">
            <core-item label="{{sections[i].label}}">
              <a href="{{sections[i].link}}" target="_self"></a>
            </core-item>
          </template>
        </core-menu>

      </core-header-panel>

      <div tool vertical layout flex class="middle header-text">
        <h1 fit id="mainTitle">{{mainTitle}}</h1>
      </div>

      <div tool vertical layout flex class="bottom header-text">
        <span id="subTitle" hidden?="{{!showSubTitle}}">{{subTitle}}</span>
      </div>
      
      <div class="container" layout vertical>
        <content></content> 
      </div>

    </core-scaffold>


  </template>

  <script>
    Polymer('app-layout', {
      mainTitle: 'Title',
      subTitle: 'Sub Title',
      sections: [{}],
      keys: function(input) {
        return Object.keys(input);
      },
      scrollHandler: function(event) {
        var scroller = event.detail.target;
        if (scroller.scrollTop == 0) {
          console.log($(this.$.mainTitle));
          $(this.$.mainTitle)[0].style.fontSize='45px';
          this.showSubTitle = true;
        } else {
          $(this.$.mainTitle)[0].style.fontSize='25px';
          this.showSubTitle = false;
        }
      }
    });
  </script>
</polymer-element>