<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="../bower_components/core-menu/core-menu.html">
<link rel="import" href="../bower_components/core-item/core-item.html">
<link rel="import" href="../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../bower_components/core-scaffold/core-scaffold.html">

<polymer-element name="app-layout" attributes="mainTitle subTitle sections social homeIconSrc">
  <template>
    <style type="text/css" no-shim>
      h1 {
        font-size: 45px;
        font-weight: 300;
        line-height: 64px;
        letter-spacing: -0.01em;
        margin: 0;
        display: table;
      }

      h3 {
        font-size: 25px;
        font-weight: 300;
      }

      /** Elements **/
      core-toolbar {
        background: #FFFFFF;
        color: white;
      }

      core-item {
        padding: 12px;
      }

      core-header-panel {
        height: 100%;
        overflow: auto;
        -webkit-overflow-scrolling: touch; 
      }

      core-scaffold::shadow core-header-panel::shadow #mainPanel {
        background-color: #DADADA;
      }

      /** Classes **/
      h3#menu-header {
        color: black;
        margin: 24px;
      }

      .header-text .maintitle {
        padding-left: 70px;
      }

      .header-text .subtitle {
        padding: 12px 0px 0px 58px;
      }

      .home {
        margin: 15px 0 15px 20px;
        cursor: pointer;
      }

      .container {
        width: 60%;
        margin: 50px;
      }

      .social-images {
        margin-left: auto; 
        margin-right: 0;
      }

      .social-images a {
        text-decoration: none;
      }

      .social-images img {
        width: 48px; 
        height: 48px;
        padding: 0 4px;
      }

      @media screen and (max-width: 1280px) {
        .container {
          width: 90%;
          margin: 20px auto;
        }
      }

      @media screen and (max-width: 969px) {
        .social-images img {
          width: 32px; 
          height: 32px;
          padding: 0 2px;
          vertical-align: bottom;
        }

        .social-images {
          margin-top: auto;
        }

         core-item.core-selected {
          font-weight: inherit;
        }
      }

      @media screen and (max-width: 620px) {
        core-scaffold::shadow core-toolbar {
          height: 60px;
        }
      }

      @media screen and (max-width: 380px) {
        .social-images img {
          display: none;
        }
      }
    </style>

    <core-scaffold id="scaffold" mode="waterfall-tall" on-scroll="{{scrollHandler}}" responsiveWidth="969px">

      <core-header-panel navigation flex mode="seamed">

        <a href="/">
          <div class="home">
            <img src="{{homeIconSrc}}" alt="Yuriy Yunikov"></img>
          </div>
        </a>

        <core-menu>
          <template repeat="{{i in keys(sections)}}">
            <core-item id="item" label="{{sections[i].label}}">
              <a href="{{sections[i].link}}" on-click="{{linkClicked}}"></a>
            </core-item>
          </template>
        </core-menu>

      </core-header-panel>

      <div tool vertical layout flex class="middle header-text">
        <h1 fit id="mainTitle" class="maintitle">{{mainTitle}}</h1>
      </div>

      <div tool horizontal layout flex class="bottom header-text">
        <div id="subTitle" class="subtitle" hidden?="{{!showSubTitle}}">{{subTitle}}</div>

        <div id="social" class="social-images">
          <template repeat="{{i in keys(social)}}">
            <a href="{{social[i].link}}" target="_blank">
              <img src="{{social[i].img}}" alt="{{social[i].alt}}">
            </a>
          </template>
        </div>
      </div>
      
      <div class="container" layout vertical>
        <content></content> 
      </div>

    </core-scaffold>


  </template>

  <script>
    Polymer('app-layout', {
      mainTitle: 'Title',
      subTitle: 'Sub Title',
      homeIconSrc: '../images/yunikov-icon.png',
      sections: [{}],
      social: [{}],
      ready: function() {
        if (screen.width <= 620) {
          this.subTitle = this.mainTitle;
          this.mainTitle = "";
          this.showSubTitle = true;
        }
      },
      keys: function(input) {
        return Object.keys(input);
      },
      scrollHandler: function(event) {
        if (screen.width > 620) {
          var scroller = event.detail.target;
          if (scroller.scrollTop == 0) {
            $(this.$.mainTitle)[0].style.fontSize='45px';
            this.showSubTitle = true;
          } else {
            $(this.$.mainTitle)[0].style.fontSize='25px';
            this.showSubTitle = false;
          }
        }
      },
      linkClicked: function(event) {
        this.$.scaffold.closeDrawer();
        window.history.back(1);
      }
    });
  </script>
</polymer-element>